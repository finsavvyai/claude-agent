# RabbitMQ Configuration File for Claude Agent Platform
# Development environment settings

# Cluster Configuration
cluster_formation.peer_discovery_backend = classic_config
cluster_formation.classic_config.nodes.1 = rabbit@claude-agent-rabbitmq

# Memory Management
vm_memory_high_watermark.relative = 0.6
vm_memory_high_watermark_paging_ratio = 0.5

# Disk Space Management
disk_free_limit.absolute = 1GB
disk_free_limit.absolute = 2GB

# File Descriptors
rabbit.fd_limit = 65536

# Heartbeat
heartbeat = 60

# TCP Settings
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true

# Log Settings
log.file.level = info
log.console = true
log.console.level = info

# Management Plugin
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0
management.path_prefix = /

# Prometheus Plugin (if enabled)
# prometheus.tcp.port = 15692
# prometheus.tcp.ip = 0.0.0.0

# Guest User (disabled for security)
default_user = guest
default_pass = guest
default_user_tags.administrator = false
default_vhost = /

# Authentication & Authorization
auth_backends.1 = internal
auth_backends.2 = rabbit_auth_backend_ldap

# SSL (disabled for development)
# ssl_options.cacertfile = /etc/rabbitmq/certs/ca_certificate.pem
# ssl_options.certfile   = /etc/rabbitmq/certs/server_certificate.pem
# ssl_options.keyfile    = /etc/rabbitmq/certs/server_key.pem
# ssl_options.verify     = verify_peer
# ssl_options.fail_if_no_peer_cert = false

# MQTT Plugin (if enabled)
# mqtt.tcp.port = 1883
# mqtt.tcp.ip = 0.0.0.0
# mqtt.ssl.port = 8883
# mqtt.ssl.ip = 0.0.0.0
# mqtt.default_user = guest
# mqtt.default_pass = guest
# mqtt.allow_anonymous = true
# mqtt.vhost = /
# mqtt.exchange = amq.topic
# mqtt.subscription_ttl = 86400000
# mqtt.prefetch = 10

# STOMP Plugin (if enabled)
# stomp.tcp.port = 61613
# stomp.tcp.ip = 0.0.0.0
# stomp.ssl.port = 61614
# stomp.ssl.ip = 0.0.0.0
# stomp.default_user = guest
# stomp.default_pass = guest
# stomp.allow_anonymous = true

# Web STOMP Plugin (if enabled)
# web_stomp.tcp.port = 15674
# web_stomp.tcp.ip = 0.0.0.0
# web_stomp.ws.path = /ws
# web_stomp.cowboy_opts.max_frame_size = 8192

# Message TTL and Size Limits
vm_memory_high_watermark_paging_ratio = 0.5
disk_free_limit.absolute = 2GB

# Queue Settings
default_vhost = claude_vhost
default_user = claude_user
default_pass = claude_password
default_user_tags.administrator = true

# Federation (disabled for development)
# federation_upstream = my-upstream

# Shovel (disabled for development)
# shovel_status.name = my-shovel

# LDAP Settings (optional for enterprise)
# auth_ldap.servers.1 = my-ldap-server
# auth_ldap.servers.1.port = 389
# auth_ldap.servers.1.dn = "cn=admin,dc=example,dc=com"
# auth_ldap.servers.1.password = password

# Metrics Collection
# collect_statistics_interval = 10000

# Lazy Queues (performance optimization)
lazy_queues.explicit_gc_run = 1000

# Resource Limits
disk_free_limit.absolute = 2GB
disk_free_limit.relative = 1.0

# Global QoS
global_qos_prefetch_count = 0
global_qos_connection_limit = 0
global_qos_channel_max = 2047
